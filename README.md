# tistory-bot

이 프로젝트는 Python과 Selenium을 이용해 티스토리에 자동으로 로그인하고 글을 작성하는 봇입니다.

## 주요 기능

- 티스토리 로그인 자동화 (쿠키 기반 세션 유지)
- 글쓰기 자동화 (제목, 본문 입력, 발행/비공개 저장)
- CodeMirror 마크다운 에디터 자동 입력 지원
- 2차 인증 등 수동 로그인 후 쿠키 저장
- 크롬드라이버 자동 탐색 및 최신 브라우저 호환
- **post.txt 파일 기반 자동 글쓰기 지원**

## 설치 방법

1. Python 3.x 설치
2. 필요한 패키지 설치:
   ```bash
   pip install selenium
   ```
3. 크롬드라이버(ChromeDriver) 설치 및 환경변수 등록
   - 크롬 브라우저 버전에 맞는 chromedriver를 [공식 사이트](https://googlechromelabs.github.io/chrome-for-testing/)에서 다운로드 후, `/usr/local/bin/`에 복사
   - 설치 확인: `chromedriver --version`

## 사용법

### 1. post.txt 파일 작성

- `post.txt` 파일의 **첫 줄**: 글 제목
- **두 번째 줄부터 끝까지**: 글 본문

예시:

```
나의 자동화 테스트 제목
이것은 자동화로 입력되는 본문입니다.\n여러 줄도 가능합니다.
```

### 2. 최초 실행(쿠키 저장)

```bash
python main.py
```

- 브라우저가 열리면 티스토리 계정으로 로그인 및 2차 인증까지 완료 후, 터미널에 Enter 입력
- 로그인 쿠키가 `tistory_cookies.pkl`로 저장됨

### 3. 자동 글쓰기 실행

```bash
python main.py
```

- `post.txt` 파일을 읽어 자동으로 글을 작성합니다.
- 이미 쿠키가 저장되어 있으면 로그인 과정 없이 바로 글쓰기 자동화 진행
- `post.txt`가 없으면 기본값(테스트 제목/작성된 글 내용입니다.)이 사용됨

### 4. 동작 과정

- 쿠키가 없으면 수동 로그인 및 쿠키 저장
- 쿠키가 있으면 자동 로그인 후 글쓰기 페이지 진입
- 마크다운 에디터에 본문 자동 입력 (CodeMirror setValue 사용)
- 발행(완료) 버튼 클릭 → 비공개 저장 버튼 클릭
- 모든 과정이 완료되면 브라우저 자동 종료

## 참고 및 주의사항

- 크롬드라이버 버전은 사용 중인 크롬 브라우저와 반드시 일치해야 합니다.
- 티스토리 보안 정책(캡차, 2차 인증 등)으로 인해 최초 로그인은 수동으로 진행해야 합니다.
- 마크다운 에디터가 아닌 다른 에디터에서는 자동 입력이 동작하지 않을 수 있습니다.
- 자동화 과정에서 UI 변경 시 selector를 직접 수정해야 할 수 있습니다.

## 파일 구조

- `main.py` : 자동화 메인 코드
- `requirements.txt` : 의존성 패키지 목록
- `tistory_cookies.pkl` : 로그인 세션 쿠키 파일(자동 생성)
- `post.txt` : 자동 작성할 글의 제목/본문 파일(사용자 작성)

## 문의

- 자동화가 동작하지 않거나, 티스토리 UI가 변경된 경우 selector 정보를 알려주시면 빠르게 대응 가능합니다.
